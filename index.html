from fpdf import FPDF

# Assessment content for both grades
assessment_title = "SPARK English Home Language\nTerm 3 Assessment\nReading & Viewing\n12 September 2025"

instructions = (
    "INSTRUCTIONS:\n"
    "- Answer all questions.\n"
    "- Write neatly and legibly.\n"
    "- Use full sentences unless otherwise instructed.\n"
    "- Manage your time carefully.\n"
    "- Total: 30 marks | Time: 40 minutes\n"
)

# Grade 9 assessment
grade9_sections = [
    {
        "title": "SECTION A: Comprehension (15 marks)",
        "text": (
            "Read the passage below and answer the questions that follow.\n\n"
            "PASSAGE: 'The River’s Gift'\n"
            "For years, the people of Willowbend lived beside a river that provided water, food, and life. "
            "One year, the rains failed, and the river shrank. A young boy, Sipho, began walking upstream "
            "each day, clearing debris and planting trees along the banks. Soon, his quiet work attracted "
            "the attention of his neighbours, who joined him. Months later, the river flowed stronger than "
            "ever before.\n"
        ),
        "questions": [
            "1.1 Where did the people of Willowbend live? (1)",
            "1.2 What caused the river to shrink? (1)",
            "1.3 Why did Sipho begin walking upstream each day? (2)",
            "1.4 Explain the main idea of the passage in your own words. (3)",
            "1.5 How did the community respond to Sipho’s actions? (2)",
            "1.6 Write a synonym for ‘quiet’ from paragraph 1. (1)",
            "1.7 Do you think one person can make a difference to the environment? Give a reason. (2)",
            "1.8 Suggest a suitable title for this text and justify your choice. (3)"
        ]
    },
    {
        "title": "SECTION B: Visual Literacy (5 marks)",
        "text": (
            "Study the cartoon provided (teacher to insert) and answer the questions.\n"
        ),
        "questions": [
            "2.1 What message is the cartoon trying to communicate? (2)",
            "2.2 How has the artist used visual elements to draw attention to the main figure? (2)",
            "2.3 Why do you think some characters in the cartoon are not taking action? (1)"
        ]
    },
    {
        "title": "SECTION C: Summary (10 marks)",
        "text": (
            "Write a 50–60 word summary of the passage ‘The River’s Gift’. Your summary must:\n"
            "- Focus on the main ideas only.\n"
            "- Be in your own words.\n"
            "- Be written in full sentences.\n"
        ),
        "questions": []
    }
]

# Grade 10 assessment (slightly more complex)
grade10_sections = [
    {
        "title": "SECTION A: Comprehension (15 marks)",
        "text": (
            "Read the passage below and answer the questions that follow.\n\n"
            "PASSAGE: 'Voices in the Wind'\n"
            "In the small town of Linton, a wind farm stood as a symbol of progress. "
            "But when repairs were delayed, the turbines stopped turning. A young woman, Amara, "
            "began organising weekly clean-ups and repair drives. Her determination inspired engineers "
            "and townspeople to volunteer their skills. Within weeks, the turbines spun again, "
            "powering homes and schools.\n"
        ),
        "questions": [
            "1.1 Where was the wind farm located? (1)",
            "1.2 Why did the turbines stop working? (1)",
            "1.3 How did Amara contribute to fixing the problem? (2)",
            "1.4 What is the underlying message of the passage? (3)",
            "1.5 Explain the role of the townspeople in the restoration. (2)",
            "1.6 Provide a synonym for ‘determination’ from paragraph 1. (1)",
            "1.7 Do you think renewable energy projects rely more on technology or community support? Justify. (2)",
            "1.8 Suggest an alternative title for the passage and explain your choice. (3)"
        ]
    },
    {
        "title": "SECTION B: Visual Literacy (5 marks)",
        "text": (
            "Study the advert provided (teacher to insert) and answer the questions.\n"
        ),
        "questions": [
            "2.1 What product or service is being advertised? (1)",
            "2.2 How does the advert appeal to the audience’s emotions? (2)",
            "2.3 Identify one persuasive technique used and explain its effect. (2)"
        ]
    },
    {
        "title": "SECTION C: Summary (10 marks)",
        "text": (
            "Write an 80–100 word summary of the passage ‘Voices in the Wind’. Your summary must:\n"
            "- Capture all key points.\n"
            "- Be in your own words.\n"
            "- Be written in full sentences.\n"
        ),
        "questions": []
    }
]

# PDF generation
class PDF(FPDF):
    def header(self):
        self.set_font('Arial', 'B', 14)
        self.multi_cell(0, 8, assessment_title, align='C')
        self.ln(5)

    def chapter(self, grade, sections):
        self.set_font('Arial', 'B', 12)
        self.cell(0, 8, f"Grade {grade}", ln=True)
        self.ln(3)
        self.set_font('Arial', '', 11)
        self.multi_cell(0, 5, instructions)
        for sec in sections:
            self.ln(2)
            self.set_font('Arial', 'B', 11)
            self.multi_cell(0, 6, sec["title"])
            self.set_font('Arial', '', 11)
            self.multi_cell(0, 5, sec["text"])
            for q in sec["questions"]:
                self.multi_cell(0, 5, q)

pdf = PDF()
pdf.set_auto_page_break(auto=True, margin=15)
pdf.add_page()
pdf.chapter(9, grade9_sections)
pdf.add_page()
pdf.chapter(10, grade10_sections)

# Save PDF
pdf_path = "/mnt/data/Term3_Assessment_Reading_Viewing_12Sep2025.pdf"
pdf.output(pdf_path)
pdf_path
